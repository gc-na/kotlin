<!--
Meta Description: # 在Kotlin中的「when」表達式：用法與範例 ## 摘要 「when」是Kotlin中的一種控制流結構，用於根據不同條件執行不同的代碼區塊，是「if-else」語句的強大替代方案。 ## 文檔 在Kotlin中，「when」表達式是一種多路選擇的控制流結構，能夠根據指定的條件執行對應的代碼塊...
Meta Keywords: when, println, else, kotlin, 表達式
-->

# 在Kotlin中的「when」表達式：用法與範例

## 摘要
「when」是Kotlin中的一種控制流結構，用於根據不同條件執行不同的代碼區塊，是「if-else」語句的強大替代方案。

## 文檔
在Kotlin中，「when」表達式是一種多路選擇的控制流結構，能夠根據指定的條件執行對應的代碼塊。這使得代碼更為簡潔和易讀。它可以接受任意類型的表達式，並支持多種比對方式，包括值比對、範圍比對、類型比對等。

### 使用方法
「when」表達式的基本語法如下：

```kotlin
when (表達式) {
    條件1 -> 執行的代碼1
    條件2 -> 執行的代碼2
    ...
    else -> 執行的代碼
}
```

當表達式的值與某個條件匹配時，對應的代碼塊將被執行。如果沒有任何條件匹配，則會執行`else`部分的代碼。

### 詳細說明
- **條件判斷**：條件可以是任意類型的數據，支持多個條件使用逗號分隔，亦可以使用範圍（如`1..10`）。
- **無需break**：與Java的switch語句不同，Kotlin的「when」表達式不需要使用`break`來防止fall-through行為。
- **返回值**：當「when」表達式用於變數賦值時，會返回匹配條件的結果。

## 範例
以下是一些「when」表達式的基本使用範例：

### 範例1：基本使用
```kotlin
val x = 2
when (x) {
    1 -> println("x 是 1")
    2 -> println("x 是 2")
    3 -> println("x 是 3")
    else -> println("x 不是 1、2 或 3")
}
```

### 範例2：範圍匹配
```kotlin
val y = 7
when (y) {
    in 1..5 -> println("y 在 1 到 5 之間")
    in 6..10 -> println("y 在 6 到 10 之間")
    else -> println("y 大於 10")
}
```

### 範例3：類型匹配
```kotlin
fun describe(obj: Any) {
    when (obj) {
        1 -> println("整數")
        "Hello" -> println("字符串")
        is Int -> println("Int 型別")
        else -> println("未知類型")
    }
}
```

## 解釋
使用「when」表達式時，開發者應注意以下幾點：
- **條件的順序**：條件的匹配是自上而下的，應確保更具體的條件在前面，以避免意外匹配。
- **類型安全**：Kotlin的「when」表達式具有類型安全性，避免了運行時的類型錯誤。
- **非必要的else**：如果所有可能的情況都已涵蓋，則`else`分支是可選的，但建議保留以處理意外情況。

## 一句總結
Kotlin中的「when」表達式是一種靈活且易於使用的多路選擇結構，用於根據不同條件執行對應的代碼區塊。